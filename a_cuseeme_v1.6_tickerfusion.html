<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>CUSeeMe Emulation v1.6 — Ticker Fusion</title>
<style>
html,body{
  margin:0;padding:0;height:100%;overflow:hidden;
  background:#fff;font-family:monospace;color:#0f0;
}

/* CAMERA FEED */
#camera{
  position:fixed;inset:0;object-fit:cover;
  transform:scaleX(-1); /* mirror */
  z-index:0;
  filter:brightness(1.05) contrast(1.05);
}

/* PROMPT FIELD */
#promptWrap{
  position:fixed;inset:0;display:flex;
  align-items:center;justify-content:center;
  z-index:2;pointer-events:none;
}
#promptBox{
  pointer-events:auto;
  background:rgba(255,255,255,0.3);
  border:1px solid rgba(0,0,0,0.15);
  border-radius:10px;
  padding:.6rem 1rem;
  font-size:2rem;
  color:#000;
  display:flex;align-items:center;gap:.4rem;
}
#input{
  background:transparent;
  border:none;outline:none;
  color:#000;font-size:inherit;
  width:12ch;
}
#caret{
  width:.4ch;height:1.3em;background:#000;
  animation:blink 1s step-end infinite;
}
@keyframes blink{50%{opacity:0}}

/* TICKER */
#ticker{
  position:fixed;
  left:10px;bottom:10px;
  width:40%;
  max-height:50%;
  display:flex;flex-direction:column-reverse;
  overflow:hidden;
  z-index:3;
  font-size:1rem;line-height:1.2rem;
  color:#0f0;opacity:.9;
}
.tline{
  opacity:.8;margin:0;
  animation:fadeIn 1s ease forwards;
  transition:opacity 40s linear;
}
@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:.8;transform:translateY(0)}
}
</style>
</head>
<body>
<video id="camera" autoplay muted playsinline></video>

<div id="promptWrap">
  <div id="promptBox">
    <input id="input" type="text" spellcheck="false" autocomplete="off" placeholder="">
    <div id="caret"></div>
  </div>
</div>

<div id="ticker"></div>

<script>
/* === CAMERA INIT === */
(async()=>{
  const cam=document.getElementById('camera');
  try{
    const stream=await navigator.mediaDevices.getUserMedia({video:true,audio:false});
    cam.srcObject=stream;
  }catch(e){
    alert('Camera access denied.');
  }
})();

/* === TICKER SYSTEM === */
const ticker=document.getElementById('ticker');
function addTickerLine(text){
  const el=document.createElement('div');
  el.className='tline';
  el.textContent=text;
  ticker.prepend(el);
  if(ticker.children.length>40) ticker.removeChild(ticker.lastChild);
  // gradual fade
  setTimeout(()=>{el.style.opacity=0.15;},40000);
}

/* DIAGNOSTIC FEED */
const diagnostics=[
  "calibrating optical link...",
  "signal noise threshold: 0.72",
  "frame drift compensated",
  "latency ping: 54ms",
  "loopback handshake OK",
  "resonance echo stable",
  "stream integrity: 99.3%",
  "packet loss negligible"
];
setInterval(()=>{
  const msg=diagnostics[Math.floor(Math.random()*diagnostics.length)];
  addTickerLine(msg);
},6000);

/* USER INPUT → echo into ticker */
const input=document.getElementById('input');
input.addEventListener('keydown',e=>{
  if(e.key==='Enter'){
    const val=input.value.trim();
    if(val){
      addTickerLine("> "+val);
      input.value='';
    }
  }
});
</script>
</body>
</html>
