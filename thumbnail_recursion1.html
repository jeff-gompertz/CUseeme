<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>YouTube Thumbnails Debug</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: black;
  }

  .floating-window {
    position: absolute;
    width: 240px;
    height: 160px;
    overflow: hidden;
    background: rgba(255,255,255,0.08);
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  }

  .floating-window img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
</style>
</head>
<body>

<div id="windows"></div>

<script>
const container = document.getElementById("windows");
const W = () => window.innerWidth;
const H = () => window.innerHeight;

/* ‚úÖ Your YouTube RSS feed */
const feedUrl = "https://www.youtube.com/feeds/videos.xml?channel_id=UCREEmHdAYvlboosrKCHe4UA";
const KEYWORD = "ghost"; // keyword filter
const MAX_THUMBS = 6;

/* Fetch RSS ‚Üí JSON */
fetch("https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent(feedUrl))
  .then(res => res.json())
  .then(data => {
    console.log("‚úÖ Raw feed data:", data);

    const items = (data && data.items) ? data.items.slice(0, 15) : [];
    console.log("‚úÖ RSS items (first 15):", items);

    let videos = items.filter(item => {
      return item.title && item.title.toLowerCase().includes(KEYWORD.toLowerCase());
    });

    console.log(`‚úÖ Filtered with keyword "${KEYWORD}":`, videos);

    if (videos.length === 0) {
      console.warn("‚ö†Ô∏è No keyword match, falling back to first items.");
      videos = items;
    }

    videos = videos.sort(() => 0.5 - Math.random()).slice(0, MAX_THUMBS);
    console.log("üé≤ Final video selection:", videos);

    if (!videos.length) {
      console.error("‚ùå No videos to show at all.");
      return;
    }

    videos.forEach((video, i) => {
      const vid = (video.guid || "").split(":").pop();
      const src = video.thumbnail || `https://i.ytimg.com/vi/${vid}/hqdefault.jpg`;

      console.log("üñºÔ∏è Using thumbnail:", src);

      const div = document.createElement("div");
      div.className = "floating-window";
      div.style.left = (20 + i * 260) + "px";
      div.style.top  = "100px";

      div.innerHTML = `<img src="${src}" alt="${video.title}">`;
      container.appendChild(div);
    });
  })
  .catch(err => console.error("‚ùå Feed error:", err));
</script>
</body>
</html>
