<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>CUSeeMe Emulation v1.7.2 â€” Annotated Layout</title>

<style>
/* 
==========================================================
GLOBAL LAYOUT + COLOR PALETTE
==========================================================
*/
html,body{
  margin:0;
  padding:0;
  height:100%;
  overflow:hidden;

  /* Base color system */
  background:#fff;              /* White background field */
  color:#0f0;                   /* Global text color (green ticker style) */

  font-family:monospace;        /* Classic terminal font feel */
}

/* 
==========================================================
CAMERA FEED (live mirrored background)
==========================================================
*/
#camera{
  position:fixed;
  inset:0;                      /* Stretches full screen */
  object-fit:cover;             /* Maintain aspect ratio, fill viewport */
  transform:scaleX(-1);         /* Mirror horizontally (CU-SeeMe style) */
  z-index:0;                    /* Lowest visual layer */

  /* Visual tuning */
  filter:brightness(1.05) contrast(1.05); /* Slight enhancement */
}

/* 
==========================================================
PROMPT FIELD (centered input box)
==========================================================
*/
#promptWrap{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;           /* Vertically center */
  justify-content:center;       /* Horizontally center */
  z-index:2;                    /* Above video */
  pointer-events:none;          /* So only input inside box is clickable */
}

/* The box surrounding the text input and blinking caret */
#promptBox{
  pointer-events:auto;
  display:flex;
  align-items:center;
  gap:.4rem;                    /* Spacing between caret and text */
  
  /* Box visuals */
  background:rgba(255,255,255,0.25); /* Semi-transparent white glass */
  border:1px solid rgba(0,0,0,0.2);  /* Subtle edge definition */
  border-radius:10px;                /* Rounded rectangle shape */
  padding:.6rem 1rem;                /* Inner spacing */
  font-size:2rem;                    /* Text size inside box */
}

/* The input field itself */
#input{
  background:transparent;       /* No fill */
  border:none;outline:none;
  color:#111;                   /* Dark gray/black text */
  font-size:inherit;            /* Inherits 2rem from #promptBox */
  width:14ch;                   /* Character width control */
}

/* Placeholder color when nothing typed yet */
#input::placeholder{
  color:rgba(0,0,0,0.3);        /* Faint gray placeholder */
}

/* The custom blinking cursor */
#caret{
  width:.25ch;                  /* Width of the cursor bar */
  height:1.3em;                 /* Height relative to text line */
  background:#111;              /* Cursor color (black) */
  animation:blink 1s step-end infinite; /* Blink timing */
}

/* Cursor blinking animation */
@keyframes blink{
  50%{opacity:0;}
}

/* 
==========================================================
TICKER (bottom-left diagnostic log)
==========================================================
*/
#ticker{
  position:fixed;
  left:10px;bottom:10px;        /* Anchored bottom-left corner */
  width:40%;                    /* Proportional width */
  max-height:50%;               /* Scroll cap for long runs */

  display:flex;
  flex-direction:column-reverse; /* Newest line appears at bottom */
  overflow:hidden;
  z-index:3;

  /* Style */
  font-size:1rem;
  line-height:1.2rem;
  color:#0f0;                   /* Classic CRT green */
  opacity:.9;                   /* Slight transparency */
}

/* Individual ticker line style */
.tline{
  opacity:.8;
  margin:0;
  animation:fadeIn 1s ease forwards; /* Fade-in motion */
  transition:opacity 45s linear;     /* Long gradual fade out */
}

/* Line fade-in animation */
@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px);}
  to{opacity:.8;transform:translateY(0);}
}

/* 
==========================================================
ACTIVATION OVERLAY (permission screen)
==========================================================
*/
#overlay{
  position:fixed;inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(255,255,255,0.9);  /* Soft white veil */
  color:#111;                        /* Text color */
  font-size:1.5rem;
  z-index:5;                         /* Highest layer */
}
</style>
</head>

<body>

<!-- Live mirrored camera feed -->
<video id="camera" autoplay muted playsinline></video>

<!-- Centered prompt field -->
<div id="promptWrap">
  <div id="promptBox">
    <div id="caret"></div>
    <input id="input" type="text" spellcheck="false" autocomplete="off" placeholder="type here...">
  </div>
</div>

<!-- Ticker log console -->
<div id="ticker"></div>

<!-- Tap-to-activate permission overlay -->
<div id="overlay">Tap to activate camera + audio</div>


<script>
/*
==========================================================
INTERACTIVE LOGIC
==========================================================
*/

(async()=>{
  const cam=document.getElementById('camera');
  const overlay=document.getElementById('overlay');
  const ticker=document.getElementById('ticker');
  const input=document.getElementById('input');

  /* --- Add ticker line --- */
  function addTickerLine(text){
    const el=document.createElement('div');
    el.className='tline';
    el.textContent=text;
    ticker.prepend(el);
    if(ticker.children.length>40)ticker.removeChild(ticker.lastChild);
    setTimeout(()=>{el.style.opacity=0.15;},45000); // slow fade
  }

  /* --- Speech setup --- */
  let voicesReady=false;
  function waitForVoices(){
    return new Promise(resolve=>{
      if(voicesReady && speechSynthesis.getVoices().length)return resolve();
      const id=setInterval(()=>{
        if(speechSynthesis.getVoices().length){
          clearInterval(id);
          voicesReady=true;
          resolve();
        }
      },100);
    });
  }

  async function speak(text){
    if(!('speechSynthesis' in window))return;
    await waitForVoices();
    const u=new SpeechSynthesisUtterance(text);
    u.rate=1.05;u.pitch=0.9;u.volume=0.8;u.lang='en-US';
    const v=speechSynthesis.getVoices();
    u.voice=v.find(x=>/samantha/i.test(x.name))||
            v.find(x=>/google/i.test(x.name))||v[0];
    speechSynthesis.speak(u);
  }

  /* --- Activate camera + audio after user tap --- */
  overlay.addEventListener('click', async ()=>{
    overlay.remove(); // Remove permission overlay
    try{
      const stream=await navigator.mediaDevices.getUserMedia({video:true,audio:false});
      cam.srcObject=stream;
      addTickerLine("ðŸŽ¥ camera stream active");
    }catch(e){
      addTickerLine("âš ï¸ camera denied: "+e.message);
      alert('Camera access denied');
    }
    // Unlock speech
    speechSynthesis.speak(new SpeechSynthesisUtterance(''));
  }, {once:true});

  /* --- Simulated system diagnostics (ambient ticker) --- */
  const diagnostics=[
    "calibrating optical link...",
    "signal noise threshold: 0.72",
    "frame drift compensated",
    "latency ping: 54ms",
    "loopback handshake OK",
    "resonance echo stable",
    "stream integrity: 99.3%",
    "field synchronization nominal"
  ];
  setInterval(()=>{
    const msg=diagnostics[Math.floor(Math.random()*diagnostics.length)];
    addTickerLine(msg);
  },6500);

  /* --- User input: enter key to generate AI-like reply --- */
  input.addEventListener('keydown',e=>{
    if(e.key!=='Enter')return;
    const val=input.value.trim();
    if(!val)return;
    addTickerLine('> '+val);
    input.value='';
    const replies=[
      `system echo: "${val}" acknowledged`,
      `field response latency: ${(Math.random()*0.8+0.2).toFixed(2)} s`,
      `semantic drift detected in "${val}"`,
      `resonance pattern: ${Math.floor(Math.random()*100)}% correlation`,
      `"${val}" logged in memory bank`
    ];
    const reply=replies[(Math.random()*replies.length)|0];
    setTimeout(()=>{
      addTickerLine('< '+reply);
      speak(reply);
    },600);
  });
})();
</script>
</body>
</html>
