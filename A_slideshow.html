<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CUSeeMe FLOAT v7 ‚Äî Header Slideshow</title>

<style>
:root{
  --bg: #0b0c0e;         /* graphite */
  --ink: #f5f5f7;
  --muted: #7b7f88;
  --accent: #42e3b5;     /* soft aqua */
  --fade: 0.45s;         /* crossfade duration */
}

html,body{
  margin:0;
  height:100%;
  background:var(--bg);
  color:var(--ink);
  font:16px/1.45 "VT323", ui-monospace, Menlo, Consolas, monospace;
  -webkit-font-smoothing:antialiased;
  overflow:hidden;
}

/* === Slide frames for crossfade =================================== */
#stageWrap{
  position:fixed;
  inset:0;
}
.slideFrame{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  border:none;
  opacity:0;
  transition:opacity var(--fade) ease;
  pointer-events:none;
}
.slideFrame.active{
  opacity:1;
  pointer-events:auto;
}

/* === NERV-ish frosted header ===================================== */
#navHeader{
  position:fixed;
  top:0; left:0; right:0;
  height:52px;
  padding:0 18px;
  display:flex;
  align-items:center;
  justify-content:space-between;

  background:rgba(11,12,14,0.78);
  backdrop-filter:blur(16px) saturate(180%);
  -webkit-backdrop-filter:blur(16px) saturate(180%);

  border-bottom:1px solid rgba(255,255,255,0.12);
  z-index:9999;

  box-shadow:
    0 14px 30px rgba(0,0,0,0.55),
    inset 0 0 0 1px rgba(255,255,255,0.06);
}

/* left/right buttons: emoji only, very light glass */
.navBtn{
  font-size:26px;
  border:none;
  background:rgba(255,255,255,0.06);
  color:var(--accent);

  width:44px;
  height:30px;
  border-radius:999px;

  display:grid;
  place-items:center;

  cursor:pointer;
  user-select:none;

  backdrop-filter:blur(10px) saturate(180%);
  -webkit-backdrop-filter:blur(10px) saturate(180%);

  box-shadow:
    inset 0 1px 2px rgba(255,255,255,0.40),
    inset 0 -2px 3px rgba(0,0,0,0.35),
    0 6px 14px rgba(0,0,0,0.35);

  transition:
    transform .18s ease,
    box-shadow .22s ease,
    background .22s ease,
    color .22s ease;
}
.navBtn:hover{
  background:rgba(255,255,255,0.14);
  color:#b5ffe4;
  box-shadow:
    0 0 22px rgba(66,227,181,0.40),
    inset 0 1px 3px rgba(255,255,255,0.60);
  transform:translateY(-1px);
}
.navBtn:active{
  transform:scale(0.93);
  box-shadow:
    inset 0 2px 5px rgba(0,0,0,0.55),
    0 0 10px rgba(66,227,181,0.30);
}

/* FLOAT label in the middle */
#floatLabel{
  font-size:15px;
  letter-spacing:0.08em;
  color:var(--accent);
  text-transform:uppercase;
  opacity:0.92;
  animation:floatPulse 2.6s ease-in-out infinite;
}
@keyframes floatPulse{
  0%,100%{
    opacity:0.7;
    text-shadow:none;
  }
  50%{
    opacity:1;
    text-shadow:0 0 12px rgba(66,227,181,0.50);
  }
}

/* HUD index (bottom-left) */
#hud{
  position:fixed;
  left:16px;
  bottom:14px;
  display:flex;
  gap:10px;
  align-items:center;
  z-index:10000;
}
#idx{
  font-size:12px;
  color:var(--muted);
}
</style>
</head>

<body>
<div id="stageWrap">
  <iframe id="frameA" class="slideFrame active"></iframe>
  <iframe id="frameB" class="slideFrame"></iframe>
</div>

<!-- GLOBAL FLOAT HEADER -->
<div id="navHeader">
  <button class="navBtn" id="btnPrev" aria-label="Previous slide">‚¨ÖÔ∏è</button>
  <div id="floatLabel">FLOAT</div>
  <button class="navBtn" id="btnNext" aria-label="Next slide">‚û°Ô∏è</button>
</div>

<!-- HUD index -->
<div id="hud">
  <div id="idx">1 / 1</div>
</div>

<script>
/* =========================================================
  1) Slide URLs (same-origin)
========================================================= */
/* Update these paths to match your CUSeeMe pages */
const SLIDES = [
  "A/CUseeme_v1.7_dynamic_restyleBLACK.html",
  "a_testCuseeme_modularTemplateRESTYLE.html",
  "a_SingleSharedVideoSplitIntoPanels_live.html",
  "double_tap_additivedissolve_LIVE.html",
  "s_6cards_video_wpmedia_multiFilter_LIVEchatgpt2.html"
];

/* =========================================================
  2) State
========================================================= */
let i = 0;
let front = document.getElementById("frameA");
let back  = document.getElementById("frameB");
const idxEl = document.getElementById("idx");

/* =========================================================
  3) Load + crossfade between iframes
========================================================= */
function show(index){
  const url = SLIDES[index];
  if (!url) return;

  console.log("üéû Loading:", url);

  // cache-bust to force fresh load
  const sep = url.includes("?") ? "&" : "?";
  back.src = url + sep + "v=" + Date.now();

  back.onload = () => {
    back.classList.add("active");
    front.classList.remove("active");
    [front, back] = [back, front];
    idxEl.textContent = `${index+1} / ${SLIDES.length}`;
  };
}

/* =========================================================
  4) Navigation (header buttons + keyboard)
========================================================= */
let lastTap = 0;
function debounceTap(){
  const now = performance.now();
  if (now - lastTap < 280) return false;
  lastTap = now;
  return true;
}

function next(){
  if (!debounceTap()) return;
  i = (i + 1) % SLIDES.length;
  show(i);
}
function prev(){
  if (!debounceTap()) return;
  i = (i - 1 + SLIDES.length) % SLIDES.length;
  show(i);
}

/* Header buttons */
document.getElementById("btnNext").addEventListener("click", next);
document.getElementById("btnPrev").addEventListener("click", prev);

/* Keyboard fallback */
window.addEventListener("keydown", e => {
  if (e.key === "ArrowRight" || e.key === " ") next();
  if (e.key === "ArrowLeft") prev();
});

/* =========================================================
  5) Boot
========================================================= */
if (SLIDES.length > 0){
  front.src = SLIDES[0];
  front.allow = back.allow =
    "camera; microphone; fullscreen; autoplay; encrypted-media";
  front.setAttribute(
    "sandbox",
    "allow-same-origin allow-scripts allow-camera allow-modals allow-forms allow-pointer-lock"
  );
  back.setAttribute(
    "sandbox",
    "allow-same-origin allow-scripts allow-camera allow-modals allow-forms allow-pointer-lock"
  );
  idxEl.textContent = `1 / ${SLIDES.length}`;
}
</script>
</body>
</html>
